pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- state management

states = {
    menu = {
        update = function()
            if btnp(5) then
                enter(states.game)
            end
        end,
        draw = function()
            cls(13)
            print("\^t\^wfast game menu", 10, 10, 7)
            print("press ❎ to start", 10, 30, 7)
        end},
    game = {
        update = function()
            if btnp(5) then
                enter(states.game_over)
            end
        end,
        draw = function()
            cls(1)
            print("game", 10, 10, 7)
            print("press ❎ to game_over", 10, 20, 7)
        end},
    game_over = {
        t = 0,
        enter = function(self)
            self.t = t() + 2
        end,
        update = function(self)
            self.active = t() > self.t
            if self.active then
                enter(states.menu)
            end
        end,
        draw = function(self)
            cls(3)
            print("game over", 10, 10, 2)
            print("wait 2 seconds", 10, 20, 7)
        end
    }
}

function enter(new_state)
    if state and state.exit then
        state:exit()
    end
    state = new_state
    if state.enter then
        state:enter()
    end
end

enter(states.menu)

function _draw()
    state:draw()
end

function _update()
    state:update()
end

function _init()
end
-->8
-- map

m = {
    player = {x = 64, y = 64},
    rampup = 0,
    rampdown = 1,
    block = 2,    
}
__gfx__
00000000006666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066776600066660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700667777650667766000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000677575756677776500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000677777756775757500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700677777756777777500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000667777556777777500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000055555506555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8888888800000000000000000000000000000000eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
8888888800000008800000000000000000000000eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
8888888800000088880000001111111100000000eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
8888888800000888888000001111111100000000eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
8888888800008888888800001111111100000000eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
8888888800088888888880001111111100000000eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
8888888800888888888888001111111107070070eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
8888888808888888888888801111111107070070eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000001020400081000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000111010101200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010000010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010000010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
